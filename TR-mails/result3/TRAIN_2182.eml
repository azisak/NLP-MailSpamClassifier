Re: kernel BUG at filemap.c:843!I did more testing with your patch on top of today's CVS, but the patch didn't help at all. The following is the results of the tests: Testing setup: 1. created a "/dev/md0" with 4 scsi disks 2. created a LVM Volume group "vg" with the "/dev/md0" 3. created a LVM logical volume "vol1" with "vg" 4. created a XFS fs with a command: mkfs.xfs -f -d sunit=8,swidth=8 /dev/vg/vol1 -----------meta-data=/dev/vg/vol1 isize=256 agcount=8, agsize=32767 blks -----------data = bsize=4096 blocks=262136, imaxpct=25 ----------- = sunit=1 swidth=1 blks, unwritten=0 -----------naming =version 2 bsize=4096 -----------log =internal log bsize=4096 blocks=1200, version=1 ----------- = sunit=1 blks -----------realtime =none extsz=65536 blocks=0, rtextents=0 Test results: 1. mount with quota enabled =occasional kernel oops, attached the file oops1 2. mount without quota enabled =occasional kernel oops, attached the file oops2 3. mount without quota enabled, while md device is in degraded mode =always kernel oops, attached the file oops3 Thanks, JLee ----- Original Message ----- From: "Eric Sandeen"  To: "James Lee"  Cc: ;  Sent: Tuesday, August 13, 2002 3:03 PM Subject: Re: kernel BUG at filemap.c:843! Hi guys - We treat MD and LVM somewhat specially, and I wonder if in this case MD is masking the fact that you're using LVM, and that might be where the problem starts. Can you try this patch, which will cause LVM &]C:U]P86=E*S4Y+S&]R(" @("5E87@L*"5E87@I M"@H]/3T]/3T]/3T]/3T]/3T]/3T]/3T]/3T]/3T]/3T]/3T]/3T]/3T]/3T] +/3T]/3T]/3T]/0H` ` end 